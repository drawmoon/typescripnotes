# 发布

## 包含的文件

通过 `package.json` 里面的 `files` 字段进行控制，例如下面的示例中指定为 `dist`，则只会包含 `dist` 文件夹：

```json
// package.json

{
    "files": [
        "dist"
    ]
}
```

部分文件不会被排除，包括并不限于：

- package.json
- package.json 里面的 `main` 字段指定的文件
- README.md
- LICENSE

## 版本

通过 `npm version <arguments>` 自动修改版本号，例如 `package.json` 的版本号为 `1.0.0`，分别执行 `version` 命令可以得到如下结果：

```json
// package.json

{
    "version": "1.0.0"
}
```

```bash
> npm version 1.0.0
v1.0.0

> npm version patch
v1.0.1

> npm version minor
v1.1.0

> npm version major
v2.0.0

> npm version prepatch
v1.0.1-0

> npm version prerelease
v1.0.1-0

> npm version prerelease --preid=beta
v1.0.1-beta.0

> npm version prerelease --preid=alpha
v1.0.1-alpha.0
```

## Standard Version

安装 standard-version：

```bash
npm install --save-dev standard-version
```

在 `package.json` 添加脚本：

```json
// package.json

{
  "scripts": {
    "release": "standard-version"
  }
}
```

- [约定式提交](https://www.conventionalcommits.org/zh-hans)

## Commit Lint

安装 commitlint：

```bash
npm install --save-dev @commitlint/config-conventional @commitlint/cli
```

配置 commitlint：

```bash
echo "module.exports = { extends: ['@commitlint/config-conventional'] };" > commitlint.config.js
```

使用 husky 在提交时检查提交信息是否符合规范

安装 husky：

```bash
npm install --save-dev husky
```

添加钩子：

```bash
cat <<EEE > .husky/commit-msg
#!/bin/sh
. "\$(dirname "\$0")/_/husky.sh"

npx --no -- commitlint --edit "\${1}"
EEE
```

在 `package.json` 添加脚本：

```json
// package.json

{
  "scripts": {
    "prepare": "husky install"
  }
}
```

执行脚本激活钩子：

```bash
npm run prepare
```